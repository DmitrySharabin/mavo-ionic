<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Ionic Tests</title>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/mavo/0.2.0/mavo.min.css"
		/>
		<link rel="stylesheet" href="style.css" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/mavo/0.2.0/mavo.min.js"></script>
		<script src="test.js"></script>
		<script src="../src/mavo-ionic.js"></script>
		<style>
			[data-test^="test"] td + td {
				white-space: pre-line;
			}

			[data-test^="test"] td:first-of-type,
			[data-test^="test"] th:first-of-type {
				word-wrap: break-word;
				flex: none;
				width: 20%;
			}
		</style>
	</head>
	<body>
		<h1>Ionic Tests</h1>

		<script type="application/json" id="countries">
			{
				"country": [
					{
						"code": "",
						"name": "Online"
					},
					{
						"code": "us",
						"name": "United States"
					},
					{
						"code": "gb",
						"name": "United Kingdom"
					}
				]
			}
		</script>

		<section mv-app="exposed">
			<h1>Form values, get</h1>

			<table class="reftest">
				<tr>
					<td>
						<ion-input property="name" value="Dmitry Sharabin"></ion-input>
					</td>
					<td>[name]</td>
					<td>Dmitry Sharabin</td>
				</tr>
				<tr>
					<td>
						<ion-input type="number" property="number" value="10"></ion-input>
					</td>
					<td>[number]</td>
					<td>10</td>
				</tr>
				<tr>
					<td><ion-range property="strength"></ion-range></td>
					<td>[strength]</td>
					<td>0</td>
				</tr>
				<tr title="Select without value">
					<td>
						<ion-select property="country1" placeholder="Choose country">
							<ion-select-option value="us">United States</ion-select-option>
							<ion-select-option value="gb">United Kingdom</ion-select-option>
							<ion-select-option value="jp">Japan</ion-select-option>
						</ion-select>
					</td>
					<td>[country1]</td>
					<td>&nbsp;</td>
				</tr>
				<tr title="Select with predefined value">
					<td>
						<ion-select
							property="country2"
							placeholder="Choose country"
							value="jp"
						>
							<ion-select-option value="us">United States</ion-select-option>
							<ion-select-option value="gb">United Kingdom</ion-select-option>
							<ion-select-option value="jp">Japan</ion-select-option>
						</ion-select>
					</td>
					<td>[country2]</td>
					<td>jp</td>
				</tr>
				<tr title="Dynamic select">
					<td>
						<ion-select property="select" id="select" value="1"></ion-select>
						<script>
							$.ready().then(function() {
								const select = $("#select");

								if (select) {
									for (let i = 1; i < 5; i++) {
										select.appendChild(
											$.create("ion-select-option", { contents: i })
										);
									}
								}
							});
						</script>
					</td>
					<td>[select]</td>
					<td>1</td>
				</tr>
				<tr>
					<td>
						<ion-checkbox property="checktrue" checked></ion-checkbox>
					</td>
					<td>[checktrue]</td>
					<td>true</td>
				</tr>
				<tr>
					<td>
						<ion-checkbox property="checkfalse"></ion-checkbox>
					</td>
					<td>[checkfalse]</td>
					<td>false</td>
				</tr>
				<tr>
					<td>
						<ion-toggle property="toggletrue" checked></ion-toggle>
					</td>
					<td>[toggletrue]</td>
					<td>true</td>
				</tr>
				<tr>
					<td>
						<ion-toggle property="togglefalse"></ion-toggle>
					</td>
					<td>[togglefalse]</td>
					<td>false</td>
				</tr>
				<tr>
					<td><ion-textarea property="bio" value="Foo Bar"></ion-textarea></td>
					<td>[bio]</td>
					<td>Foo Bar</td>
				</tr>
				<tr title="Basic segment bar">
					<td>
						<ion-segment property="segmentwithvalue" value="Baz">
							<ion-segment-button value="Foo">Foo</ion-segment-button>
							<ion-segment-button value="Bar">Bar</ion-segment-button>
							<ion-segment-button value="Baz">Baz</ion-segment-button>
						</ion-segment>
					</td>
					<td>[segmentwithvalue]</td>
					<td>Baz</td>
				</tr>
				<tr title="Nullable segment bar">
					<td>
						<ion-segment property="segmentwithoutvalue">
							<ion-segment-button value="Foo">Foo</ion-segment-button>
							<ion-segment-button value="Bar">Bar</ion-segment-button>
							<ion-segment-button value="Baz">Baz</ion-segment-button>
						</ion-segment>
					</td>
					<td>[segmentwithoutvalue]</td>
					<td>&nbsp;</td>
				</tr>
				<tr title="Searchbar">
					<td>
						<ion-searchbar
							property="search"
							value="Dmitry Sharabin"
						></ion-searchbar>
					</td>
					<td>[search]</td>
					<td>Dmitry Sharabin</td>
				</tr>
			</table>
		</section>

		<section mv-app="radio">
			<h1>Radio buttons, get</h1>

			<table class="reftest">
				<tr title="Basic radio buttons">
					<td>
						<ion-radio-group property="radio1" value="b">
							<ion-item>
								<ion-label>a</ion-label>
								<ion-radio value="a"></ion-radio>
							</ion-item>

							<ion-item>
								<ion-label>b</ion-label>
								<ion-radio value="b"></ion-radio>
							</ion-item>
						</ion-radio-group>
					</td>
					<td>[radio1]</td>
					<td>b</td>
				</tr>
				<tr title="Nullable radio buttons">
					<td>
						<ion-radio-group property="radio2">
							<ion-item>
								<ion-label>a</ion-label>
								<ion-radio value="a"></ion-radio>
							</ion-item>

							<ion-item>
								<ion-label>b</ion-label>
								<ion-radio value="b"></ion-radio>
							</ion-item>
						</ion-radio-group>
					</td>
					<td>"[radio2]"</td>
					<td>""</td>
				</tr>
				<tr title="Radio buttons with dynamic value" class="interactive">
					<td>
						<input type="checkbox" property="changeRadio" />
						<ion-radio-group property="radio3" value="d">
							<ion-item>
								<ion-label>a</ion-label>
								<ion-radio value="[if(changeRadio, 'a', 'c')]"></ion-radio>
							</ion-item>

							<ion-item>
								<ion-label>b</ion-label>
								<ion-radio value="[if(changeRadio, 'b', 'd')]"></ion-radio>
							</ion-item>
						</ion-radio-group>
					</td>
					<td>[radio3]</td>
					<td>d</td>
				</tr>
			</table>
		</section>

		<section mv-app="formset">
			<h1>Form values, set</h1>
			<script>
				function testFormGet(script) {
					let td = script.parentNode;
					let tr = td.parentNode;

					td.previousElementSibling.addEventListener(
						"mv-change",
						Mavo.rr(function(evt) {
							requestAnimationFrame(function() {
								let controls = $$("ion-input, ion-select, ion-range", tr);
								td.textContent = controls
									.map(i => i.getAttribute("value"))
									.join(" ");
							});
						})
					);
				}
			</script>
			<table class="reftest">
				<tr>
					<td>
						<ion-input property="foo1" value="['Dmitry Sharabin']"></ion-input>
					</td>
					<td>
						<script>
							testFormGet(document.currentScript);
						</script>
					</td>
					<td>Dmitry Sharabin</td>
				</tr>
				<tr>
					<td>
						<ion-input
							property="foo2"
							type="number"
							value="[5 + 5]"
						></ion-input>
					</td>
					<td>
						<script>
							testFormGet(document.currentScript);
						</script>
					</td>
					<td>10</td>
				</tr>
				<tr title="Via mv-value on parent">
					<td id="with-mv-value">
						<div
							property="foo3"
							mv-multiple
							mv-value="[
								{max: 800, value: 750},
								{max: 900}
							]"
						>
							<ion-input
								property="value"
								type="number"
								mv-default="[900 / 2]"
							></ion-input>
							[value]
						</div>
					</td>
					<td>
						<script>
							testFormGet(document.currentScript);
						</script>
					</td>
					<td>
						750 450
					</td>
				</tr>
				<tr>
					<td>
						<ion-select property="foo4" value="[5 + 5]">
							<ion-select-option value="1">One</ion-select-option>
							<ion-select-option value="10">Ten</ion-select-option>
						</ion-select>
					</td>
					<td>
						<script>
							testFormGet(document.currentScript);
						</script>
					</td>
					<td>
						10
					</td>
				</tr>
				<tr title="Populating a &lt;select> which is also a property">
					<td>
						<ion-select property id="prop1" value="1">
							<ion-select-option
								mv-multiple
								mv-value="[1, 2, 3, 4]"
							></ion-select-option>
						</ion-select>
					</td>
					<td>[prop1]</td>
					<td>
						1
					</td>
				</tr>
				<tr>
					<td><ion-range property="foo5" value="[5 + 5]"></ion-range></td>
					<td>
						<script>
							testFormGet(document.currentScript);
						</script>
					</td>
					<td>10</td>
				</tr>
				<tr>
					<td>
						<ion-range
							property="foo6"
							max="[500 * 2]"
							value="[250 * 2]"
						></ion-range>
					</td>
					<td>
						<script>
							testFormGet(document.currentScript);
						</script>
					</td>
					<td>500</td>
				</tr>
				<tr title="Via mv-value on parent">
					<td>
						<div
							property="foo7"
							mv-multiple
							mv-value="[
								{max: 800, value: 750},
								{max: 900}
							]"
						>
							<ion-range
								property="value"
								min="0"
								max="[max]"
								mv-default="[max / 2]"
							></ion-range>
							[value]
						</div>
					</td>
					<td>
						<script>
							testFormGet(document.currentScript);
						</script>
					</td>
					<td>
						750 450
					</td>
				</tr>
			</table>
		</section>

		<section>
			<h1>Numbers</h1>
			<table class="reftest">
				<tr>
					<td mv-app>
						<ion-label property="prop1" datatype="number">0</ion-label>
						<ion-label property="prop2" datatype="number">1</ion-label>
						<ion-label property="prop3" datatype="number">-1</ion-label>
					</td>
					<td>
						0 1 -1
					</td>
				</tr>
			</table>
		</section>

		<section mv-app="buttons">
			<h1>Counters</h1>

			<p>Click the buttons twice</p>

			<table class="reftest">
				<tr>
					<td>
						<ion-button property="myButton">
							ðŸ–±âœ• 2
						</ion-button>
					</td>
					<td>[myButton]</td>
					<td>2</td>
				</tr>
				<tr>
					<td>
						<ion-fab-button property="myFabButton">
							ðŸ–±âœ• 2
						</ion-fab-button>
					</td>
					<td>[myFabButton]</td>
					<td>2</td>
				</tr>
			</table>
		</section>

		<section>
			<h1>Booleans</h1>

			<p>For the last one, edit and check it.</p>

			<table class="reftest">
				<tr>
					<td mv-app="booleans">
						<ion-label property="prop1" datatype="boolean">Foo bar</ion-label>
						[prop1]
					</td>
					<td>false</td>
				</tr>
				<tr title="With custom attribute">
					<td mv-app="booleans">
						<ion-label
							property="prop1"
							datatype="boolean"
							mv-attribute="data-foo"
						>
							Foo bar
						</ion-label>
						[prop1]
					</td>
					<td>Foo bar false</td>
				</tr>
				<tr title="Via checkbox editor">
					<td mv-app="booleans">
						<ion-label property="prop1">
							Foo bar
							<input type="checkbox" checked />
						</ion-label>
						[prop1]
					</td>
					<td>
						Foo bar true
					</td>
				</tr>
				<tr>
					<td>
						<pre id="boolean-data">
{
	"prop1": false
}
</pre
						>
					</td>
					<td>
						<script>
							document.write($$("td pre").pop().outerHTML);
						</script>
					</td>
				</tr>
				<tr
					title="Via render"
					class="interactive"
					data-click=".mv-edit wait 2s after mv-load"
				>
					<td mv-app="booleans" mv-storage="#boolean-data">
						<ion-label property="prop1">
							Foo bar
						</ion-label>
						[prop1]
					</td>
					<td>
						Foo bar true
					</td>
				</tr>
			</table>
		</section>

		<section mv-app="images">
			<h1>Images</h1>

			<table class="reftest">
				<tr title="ion-img">
					<td>
						<ion-img
							property="image"
							src="http://ionicframework.com/img/ionic-logo-blog.png"
						></ion-img>
					</td>
					<td></td>
				</tr>
			</table>
		</section>

		<section mv-app="blocks" class="mv-autoedit">
			<h1>Block elements</h1>

			<table class="reftest">
				<tr title="ion-label">
					<td>
						<ion-label property="prop1">Type here</ion-label>
					</td>
					<td>[prop1]</td>
					<td>Type here</td>
				</tr>
				<tr title="ion-text">
					<td>
						<ion-text property="prop2" color="danger">Type here</ion-text>
					</td>
					<td>[prop2]</td>
					<td>Type here</td>
				</tr>
				<tr title="ion-title">
					<td>
						<ion-title property="prop3">Type here</ion-title>
					</td>
					<td>[prop3]</td>
					<td>Type here</td>
				</tr>
				<tr title="ion-badge">
					<td>
						<ion-badge property="prop4">Type here</ion-badge>
					</td>
					<td>[prop4]</td>
					<td>Type here</td>
				</tr>
				<tr title="ion-card-title">
					<td>
						<ion-card-title property="prop5">Type here</ion-card-title>
					</td>
					<td>[prop5]</td>
					<td>Type here</td>
				</tr>
				<tr title="ion-card-subtitle">
					<td>
						<ion-card-subtitle property="prop6">Type here</ion-card-subtitle>
					</td>
					<td>[prop6]</td>
					<td>Type here</td>
				</tr>
				<tr title="ion-card-content">
					<td>
						<ion-card-content property="prop7">Type here</ion-card-content>
					</td>
					<td>[prop7]</td>
					<td>Type here</td>
				</tr>
				<tr title="ion-note">
					<td>
						<ion-note property="prop8">Type here</ion-note>
					</td>
					<td>[prop8]</td>
					<td>Type here</td>
				</tr>
			</table>
		</section>

		<section mv-app mv-source="#countries">
			<h1>Broad references</h1>

			<table class="reftest">
				<tr>
					<td>
						<ion-select>
							<ion-select-option
								value="[code]"
								property="country"
								mv-multiple
								typeof
							>
								[name]
							</ion-select-option>
						</ion-select>
					</td>
					<td>
						<ion-select>
							<ion-select-option value="">Online</ion-select-option>
							<ion-select-option value="us">United States</ion-select-option>
							<ion-select-option value="gb">United Kingdom</ion-select-option>
						</ion-select>
					</td>
				</tr>
			</table>
		</section>
	</body>
</html>
